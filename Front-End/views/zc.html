<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>注册</title>
    <link rel="stylesheet" href="../public/css/zc.css" />
  </head>
  <body>
    <img class="img" src="../public/img/2.jpg" alt="" />
    <div class="outer2" id="outer2">
      <div class="main2" id="mian2">
        <div class="top_title2">请新建您的账号注册系统</div>
        <form id="register_form" name="myform" action="/register" method="post">
          <div class="All_input">
            <input
              autocomplete="off"
              class="input_one"
              id="name"
              name="name"
              type="text"
              placeholder="请输入您的姓名"
            />
            <input
              autocomplete="off"
              class="input_two"
              id="account"
              name="account"
              type="text"
              placeholder="请输入您的账号"
            />
            <input
              autocomplete="off"
              class="input_three"
              id="password"
              name="password"
              type="text"
              placeholder="请输入您的密码"
            />
            <input
              autocomplete="off"
              class="input_four"
              id="Password"
              name="Password"
              type="text"
              placeholder="请确认您的密码"
            />
          </div>
          <div class="All_btn">
            <button type="submit" class="btn_one" id="btn_one">注册</button>
            <!-- <button type="button" onclick="btn()">测试</button> -->
            <button
              type="button"
              class="btn_two"
              id="btn_two"
              onclick="btn_two()"
            >
              返回
            </button>
          </div>
        </form>
        <div class="Foot_word">
          Super-CQUPT-Supermarket-Management-System Designed By XZY
        </div>
      </div>
    </div>
    <script src="../node_modules/jquery/dist/jquery.js"></script>
    <!-- <script src="../../Back-End/node_modules/jquery/dist/jquery.js"></script> -->
    <script>
      $('#register_form').on('submit',function(e){
        e.preventDefault()
        var formData = $(this).serialize()
        $.ajax({
          url:'/register',
          type:'post',
          data:formData,
          dataType:'json',
          success:function(data){
            // console.log(data);
            var err_code = data.err_code
            if(err_code === 0){
              window.alert('注册成功')
              // window.location.href='/login'
            }else if(err_code === 1){
              window.alert('姓名或账号已存在')
            }else if(err_code === 500){
              window.alert('服务器忙，请稍后重试')
            }
          }
        })
      })
      // var btn_two = document.getElementById('btn_two')
      // btn_two.onclick=function(){
      //   window.location.href='/login'
      // }
      // // var btn_one = document.getElementById('btn_one')
      // // btn_one.onclick=function(){
      // //   window.alert('请输入信息')
      // // }
      // var name = document.getElementById('name')
      // var account = document.getElementById('account')
      // var password = document.getElementById('password')
      // var Password = document.getElementById('Password')
      // function btn(){
      //   console.log(password.value);
      // }
      // // console.log(password.value);

      // var btn_one = document.getElementById("btn_one");
      // btn_one.onclick = function () {
      //   var myform = document.getElementById("register_form");
      //   var formData = new FormData(myform); //将HTML表单转换为formData表单对象
      //   console.log(formData);
      //   const Ajax = (method,url,data) =>{
      //   return new Promise((resolve,reject) =>{
      //     const xhr = new XMLHttpRequest();
      //     xhr.open(method,url,true);
      //     // xhr.send(data);
      //     xhr.onreadystatechange = () =>{
      //       if(xhr.readyState == 4){
      //         if((xhr.status >= 200 && xhr.status <300) || xhr.status ==304 ){
      //           let res = JSON.parse(xhr.response);
      //           resolve(res)
      //           console.log(res);
      //         }else{
      //           reject('请求失败')
      //         }
      //       }
      //     }
      //     xhr.send(data);
      //   })
      // }
      // Ajax('post','http://127.0.0.1:3000/register')
      // };

      // const Ajax = (method,url,data) =>{
      //   return new Promise((resolve,reject) =>{
      //     const xhr = new XMLHttpRequest();
      //     xhr.open(method,url,true);
      //     xhr.send(data);
      //     xhr.onreadystatechange = () =>{
      //       if(xhr.readyState == 4){
      //         if((xhr.status >= 200 && xhr.status <300) || xhr.status ==304 ){
      //           let res = JSON.parse(xhr.response);
      //           resolve(res)
      //         }else{
      //           reject('请求失败')
      //         }
      //       }
      //     }
      //   })
      // }
      // Ajax('post','http://127.0.0.1:3000/register')
      // .then((res) =>{
      //   const result =res;
      //   console.log(res);
      // })
    </script>
  </body>
</html>
